# API Reference (Python DB-API)

## Wrapper Types
- JSONB: `scratchbird.types.Jsonb`
- RANGE: `scratchbird.types.Range`
- GEOMETRY: `scratchbird.types.Geometry`


## Module attributes
- apilevel = "2.0"
- threadsafety = 2
- paramstyle = "named"

## connect()
```python
def connect(dsn=None, user=None, password=None, host=None, database=None, **kwargs) -> Connection:
    ...
```

## Connection
```python
class Connection:
    def close(self) -> None: ...
    def commit(self) -> None: ...
    def rollback(self) -> None: ...
    def cursor(self) -> "Cursor": ...
    def execute(self, sql: str, params=None) -> "Cursor": ...
    def executemany(self, sql: str, seq_of_params) -> "Cursor": ...
    def setinputsizes(self, sizes) -> None: ...
    def setoutputsize(self, size, column=None) -> None: ...
```

## Cursor
```python
class Cursor:
    def execute(self, sql: str, params=None) -> None: ...
    def executemany(self, sql: str, seq_of_params) -> None: ...
    def fetchone(self): ...
    def fetchmany(self, size=None): ...
    def fetchall(self): ...
    def close(self) -> None: ...
    def setinputsizes(self, sizes) -> None: ...
    def setoutputsize(self, size, column=None) -> None: ...
    description: tuple
    rowcount: int
    arraysize: int
    lastrowid: object
```

## Async API (optional)
```python
async def connect_async(...) -> "AsyncConnection": ...
class AsyncConnection:
    async def cursor(self) -> "AsyncCursor": ...
    async def commit(self) -> None: ...
    async def rollback(self) -> None: ...
class AsyncCursor:
    async def execute(self, sql: str, params=None) -> None: ...
    async def fetchone(self): ...
    async def fetchmany(self, size=None): ...
    async def fetchall(self): ...
```

## Usage examples
```python
import scratchbird

conn = scratchbird.connect(host="localhost", database="db", user="user", password="pass")
cur = conn.cursor()
cur.execute("select 1 as one")

cur.execute("select * from widgets where id = :id", {"id": 42})
rows = cur.fetchall()
```
